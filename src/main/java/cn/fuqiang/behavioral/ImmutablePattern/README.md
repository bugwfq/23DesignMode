## 不变模式（Immutable pattern）

         一个对象的状态在对象被创建后就不在变化，这就是所谓的不变模式。
         
         一般的来讲一个对象要么是可变对象（Mutable Object）,要么是不变对象（Immutable Object）.
    一个可变对象的状态可以改变，而一个不可变对象的状态不可改变。不变模式的做法早在面向对象的编程
    中便得到使用，是Mark Grand 在 1998年指出提出的，并从设计模式的角度上讨论了不变模式。
        不变模式缺少改变自身状态的行为，因此他是关于行为的，所以把他归类到行为模式了
        
        
   不变模式的结构和实现
            
          不变模式可增强对象的强壮性（robustness）。不变模式允许多个对象共享某一对象，降低了
       对该对象进行并发访问（Concurrent Access）是的同步化开销。如果需要修改一个不变对象的状态，
       呢么就需要建立一个新的同类对象，并在创建时将这个新的状态存储在新的对象里
       
          不变模式只涉及到一个类，一个类的内部状态创建后在整个生命周期都不会发生变化，这样的
        类称为不变类。这种使用不变类的方法叫做不变模式。不变模式不需要类图的描述
        
   不变模式的两种形式：
   
            1.弱不变模式 weakly immutable pattern
                一个类的实例的状态是不可变化的。但是这个类的子类的实例具有可能会变化的状态。
            这样的类符合弱不变模式的定义。
             弱不变模式需要满足三点：
                1).当对象的构造子将对象初始化之后，对象的状态不再改变
                （也就是说不能有set方法再去修改状态）
                2).所有的属性度应该是私有的。不要声明任何公开的属性，以防客户端对象直接修改任何的
                内部状态。
                3).这个对象所引用到的其他对象如果是可变对象的话，必须设法限制外界对这些可变对象
                的访问，以防止外界修改这些对象。如果可能，应当尽量在不变对象的内部初始化这些被引
                用到的对象，而不要在客户端初始化，然后在传入到不变对象内部中来你，如果某个可变对
                象必须在客户端初始化，然后再传入到不变对象里的话，就应当考虑在不变对象初始化的时
                候将这个可变对象复制一份，而不要使用原来的拷贝。(可使用原型模式去复制)
             弱不变的缺点：
                 1).一个弱不变对象的子对象可以是可变对象；
                 2).这个可变的子对象可以修改父对象的状态；
                 
                
                  
            2.强不变模式 strongly immutable pattern
                一个类的实例的状态不会改变，同时他的子类的实例也具有不可变化的状态。这样的类符合
             强不变模式。要实现强不变模式，一个类必须首先满足弱不变模式的所要求的所有条件，并且
             还要满足两个条件：
                1).所考虑的类所有的方法都应当是final，这样子类就不能够置换掉此类的方法。
                2).这个类本身就是final的，呢么这个类就不可能会有子类，从而也就不可能有被子类修改
                的问题。
                
                
                
                
 注意：
 “不变” 和 “只读”的区别
        
            有时候我们会将不变与只读混淆,“不变” (Immutable) 与 “只读” (Read Only) 是不同的。
        当一个变量是“只读”时,变量不能直接改变，但是可以在其他变量发生改变的时候发生改变。
            比如，一个人的出生年月日是“不变”属性，而一个人的年龄是“只读”的属性，一个人的年龄
         会随着时间发生变化，而人的出生年月日则不会变化。这就是“不变”和“只读”的区别。